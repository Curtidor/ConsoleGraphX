#include "main_scene.h"


MainScene::MainScene(std::string name) : Scene(name)
{
	SceneSystem::RegisterScene(this);
	SceneSystem::LoadScene(this->GetSceneName());
}

void MainScene::Initialize()
{
	Entity* snowPrefab = this->RegisterEntityN("snow");
	//snowPrefab->AddComponent<Snow>();
	Sprite* snowSprite = (Sprite*)snowPrefab->AddComponent<Sprite>(4, 4, Color::DarkRed);
	snowSprite->m_layer = 5;
	snowPrefab->GetComponent<Transform>()->SetPosition(Screen::GetWidth_A() / 2, 0);
	Spawner* spawner = (Spawner*)snowPrefab->AddComponent<Spawner>();

	spawner->minSpread = Vector3(-60, 0,0);
	spawner->maxSpread = Vector3(60, 50, 0);

	for (int i = 0; i < 20; i++)
	{
		spawner->Spawn();
	}


	Entity* grass = this->RegisterEntityN("Grass");
	grass->GetComponent<Transform>()->SetPosition(0, 90);
	Sprite* grassSprite = (Sprite*)grass->AddComponent<Sprite>(Screen::GetWidth_A(), 10, Green);
	grassSprite->m_layer = 1;
	
	Entity* sky = this->RegisterEntityN("Sky");
	sky->GetComponent<Transform>()->SetPosition(0, 0);
	Sprite* spriteSky = (Sprite*)sky->AddComponent<Sprite>(Screen::GetWidth_A(), 90, Blue);
	spriteSky->m_layer = -5;

	Entity* player = this->RegisterEntityN("Player");
	player->AddComponent<Player>();
	
	// console graph-x pixels
	CHAR_INFO* consoleGraphXPixels = new CHAR_INFO[595]{ {Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{Screen::s_transparentPixel, 0},{L'█', 15},{L'█', 15},{Screen::s_transparentPixel, 0} };

	Entity* tE = new Entity();
	Sprite* spritetE1 = (Sprite*) tE->AddComponent<Sprite>(119, 5, consoleGraphXPixels);
	spritetE1->m_layer = 1;
	tE->GetComponent<Transform>()->SetPosition(Screen::GetWidth_A() / 2 - (119 / 2), 10);

	Entity* tE2 = new Entity();
	Sprite* spritetE2 = (Sprite*)tE2->AddComponent<Sprite>(119, 5, consoleGraphXPixels);
	spritetE2->m_layer = 1;
	tE2->GetComponent<Transform>()->SetPosition(10, 77);
	// console graph-x pixels


	this->RegisterEntity(tE);
	this->RegisterEntity(tE2);

	
}
